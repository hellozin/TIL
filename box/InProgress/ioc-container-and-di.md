# IoC 컨테이너와 DI

### IoC 컨테이너를 통해 애플리케이션이 만들어지는 방식

메타 정보 리소스 (XML, Java 빈 등록 설정) > 메타정보 리더(BeanDefinitionReader) > 설정 메타정보(BeanDefinition) > BeanDefinition + Pojo > IoC 컨테이너(ApplicationContext) > DI 된 빈으로 동작하는 애플리케이션

### 컨텍스트 계층 구조

애플리케이션의 ApplicationContext는 보통 한개로 충분하지면 여러개를 사용할 수도 있다. 주로 트리 모양의 계층 구조가 필요할 때 사용한다.

계층구조 안의 컨텍스트는 각자 독립적으로 빈 오프젝트를 관리하지만 DI를 위해 빈을 찾을때는 부모 컨텍스트까지 모두 검색한다. 자식 컨텍스트는 검색하지 않기 때문에 형제 컨텍스트 또한 검색하지 않는다.

위 내용을 따라 컨텍스트의 일부 빈 설정만 바꾸고 싶을 경우 컨텍스트 계층 구조를 만들어서 자식 컨텍스트에서 설정한 뒤 사용하면 된다.

### 웹 애플리케이션의 IoC 컨테이너 구성

여러개의 자식 컨텍스트를 두고 공통 빈을 부모 컨텍스트로 뽑아서 공유할 게 아닌 경우에도 왜 계층 구조를 사용할까?

전체 애플리케이션에서 웹 기술에 의존적인 부분과 그렇지 않은 부분을 구분하기 위함.

그러면 JSP나 스트럿츠, AJAX 엔진 같은 곳에서 어떻게 루트 애플리케이션 컨텍스트에 접근할 수 있을까?

WebApplicationContextUtils.getWebApplicationContext(ServletContext sc)

!주의 : 서로 다른 컨텍스트는 계층 구조라도 독립적으로 관리되며 AOP 등 컨텍스트에 종속적인 수행을 잘 인지하고 있어야 한다.